<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Chatbot</title>
    <style>
        :root {
            --primary-color: #4285f4;
            --secondary-color: #34a853;
            --bot-color: #f1f1f1;
            --user-color: #e3f2fd;
            --text-color: #333;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f9f9f9;
        }
        
        h1 {
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 30px;
        }
        
        .chat-container {
            background-color: white;
            border-radius: 10px;
            box-shadow: var(--shadow);
            overflow: hidden;
            height: 500px;
            display: flex;
            flex-direction: column;
        }
        
        .chat-header {
            background-color: var(--primary-color);
            color: white;
            padding: 15px;
            text-align: center;
            font-weight: bold;
        }
        
        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .message {
            max-width: 80%;
            padding: 10px 15px;
            border-radius: 18px;
            word-wrap: break-word;
        }
        
        .bot-message {
            align-self: flex-start;
            background-color: var(--bot-color);
            border-bottom-left-radius: 5px;
        }
        
        .user-message {
            align-self: flex-end;
            background-color: var(--user-color);
            border-bottom-right-radius: 5px;
        }
        
        .chat-input {
            display: flex;
            padding: 15px;
            background-color: #f5f5f5;
            border-top: 1px solid #ddd;
        }
        
        #user-input {
            flex: 1;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 25px;
            outline: none;
            font-size: 16px;
        }
        
        #send-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 10px 20px;
            margin-left: 10px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        #send-btn:hover {
            background-color: #3367d6;
        }
        
        .typing-indicator {
            display: none;
            align-self: flex-start;
            background-color: var(--bot-color);
            padding: 10px 15px;
            border-radius: 18px;
            margin-bottom: 5px;
        }
        
        .typing-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #666;
            margin: 0 2px;
            animation: typingAnimation 1.4s infinite ease-in-out;
        }
        
        .typing-dot:nth-child(1) {
            animation-delay: 0s;
        }
        
        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        @keyframes typingAnimation {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-5px); }
        }
        
        .help-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background-color: var(--secondary-color);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow);
            font-weight: bold;
            font-size: 20px;
        }
        
        .help-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 100;
            align-items: center;
            justify-content: center;
        }
        
        .help-content {
            background-color: white;
            padding: 25px;
            border-radius: 10px;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }
        
        .close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }
        
        @media (max-width: 600px) {
            .chat-container {
                height: 70vh;
            }
            
            .message {
                max-width: 90%;
            }
        }
    </style>
</head>
<body>
    <h1>Simple Chatbot</h1>
    
    <div class="chat-container">
        <div class="chat-header">
            ChatBot Assistant
        </div>
        
        <div class="chat-messages" id="chat-messages">
            <!-- Messages will appear here -->
        </div>
        
        <div class="typing-indicator" id="typing-indicator">
            <span class="typing-dot"></span>
            <span class="typing-dot"></span>
            <span class="typing-dot"></span>
        </div>
        
        <div class="chat-input">
            <input type="text" id="user-input" placeholder="Type your message here..." autocomplete="off">
            <button id="send-btn">Send</button>
        </div>
    </div>
    
    <div class="help-btn" id="help-btn">?</div>
    
    <div class="help-modal" id="help-modal">
        <div class="help-content">
            <span class="close-btn" id="close-help">&times;</span>
            <h2>ChatBot Help</h2>
            <p>Here are the commands you can use:</p>
            
            <h3>Basic Commands:</h3>
            <ul>
                <li><strong>hello/hi/hey</strong> - Greet the chatbot</li>
                <li><strong>time</strong> - Get current time</li>
                <li><strong>date</strong> - Get current date</li>
                <li><strong>joke</strong> - Hear a random joke</li>
                <li><strong>weather [location]</strong> - Get weather information (simulated)</li>
                <li><strong>calculate [expression]</strong> - Do simple math (e.g., 'calculate 2+2')</li>
            </ul>
            
            <h3>Memory Commands:</h3>
            <ul>
                <li><strong>remember [key] [value]</strong> - Store information</li>
                <li><strong>recall [key]</strong> - Recall stored information</li>
                <li><strong>clear</strong> - Clear all stored information</li>
            </ul>
            
            <h3>Other Commands:</h3>
            <ul>
                <li><strong>help</strong> - Show this help message</li>
                <li><strong>about</strong> - Learn about this chatbot</li>
                <li><strong>quit/exit</strong> - End the conversation</li>
            </ul>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const chatMessages = document.getElementById('chat-messages');
            const userInput = document.getElementById('user-input');
            const sendBtn = document.getElementById('send-btn');
            const typingIndicator = document.getElementById('typing-indicator');
            const helpBtn = document.getElementById('help-btn');
            const helpModal = document.getElementById('help-modal');
            const closeHelp = document.getElementById('close-help');
            
            let userName = "User";
            let memory = JSON.parse(localStorage.getItem('chatbotMemory')) || {
                facts: {},
                sessions: 0
            };
            
            // Initialize with a greeting if it's a new session
            if (!memory.sessions) {
                addBotMessage("Hello! I'm your simple chatbot. Type 'help' to see what I can do.");
            }
            memory.sessions++;
            saveMemory();
            
            // Focus input field on load
            userInput.focus();
            
            // Send message when button is clicked
            sendBtn.addEventListener('click', sendMessage);
            
            // Send message when Enter is pressed
            userInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
            
            // Help button functionality
            helpBtn.addEventListener('click', function() {
                helpModal.style.display = 'flex';
            });
            
            closeHelp.addEventListener('click', function() {
                helpModal.style.display = 'none';
            });
            
            // Close modal when clicking outside
            window.addEventListener('click', function(e) {
                if (e.target === helpModal) {
                    helpModal.style.display = 'none';
                }
            });
            
            function sendMessage() {
                const message = userInput.value.trim();
                if (message === '') return;
                
                // Add user message to chat
                addUserMessage(message);
                userInput.value = '';
                
                // Show typing indicator
                typingIndicator.style.display = 'flex';
                chatMessages.scrollTop = chatMessages.scrollHeight;
                
                // Process after a short delay to simulate thinking
                setTimeout(() => {
                    typingIndicator.style.display = 'none';
                    const response = processCommand(message);
                    addBotMessage(response);
                    
                    // Check if it's time to quit
                    if (message.toLowerCase() === 'quit' || message.toLowerCase() === 'exit') {
                        userInput.disabled = true;
                        sendBtn.disabled = true;
                    }
                }, 1000 + Math.random() * 1000);
            }
            
            function addUserMessage(message) {
                const messageElement = document.createElement('div');
                messageElement.classList.add('message', 'user-message');
                messageElement.textContent = message;
                chatMessages.appendChild(messageElement);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
            
            function addBotMessage(message) {
                const messageElement = document.createElement('div');
                messageElement.classList.add('message', 'bot-message');
                messageElement.textContent = message;
                chatMessages.appendChild(messageElement);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
            
            function processCommand(userInput) {
                if (!userInput.trim()) {
                    return "Please say something or type 'help' for options.";
                }
                
                // Split input into command and arguments
                const parts = userInput.toLowerCase().split(' ');
                const command = parts[0];
                const args = parts.slice(1);
                
                // Check for known commands
                if (command === 'hello' || command === 'hi' || command === 'hey') {
                    return respondToGreeting();
                } else if (command === 'time') {
                    return tellTime();
                } else if (command === 'date') {
                    return tellDate();
                } else if (command === 'joke') {
                    return tellJoke();
                } else if (command === 'help') {
                    return showHelp();
                } else if (command === 'remember') {
                    if (args.length < 2) {
                        return "Please provide both a key and value to remember.";
                    }
                    const key = args[0];
                    const value = args.slice(1).join(' ');
                    return rememberInfo(key, value);
                } else if (command === 'recall') {
                    if (!args.length) {
                        return "Please specify what you want me to recall.";
                    }
                    return recallInfo(args.join(' '));
                } else if (command === 'clear') {
                    return clearMemory();
                } else if (command === 'quit' || command === 'exit') {
                    return quitChat();
                } else if (command === 'weather') {
                    return weatherInfo(args.join(' '));
                } else if (command === 'calculate') {
                    if (!args.length) {
                        return "Please provide an expression to calculate.";
                    }
                    return calculate(args.join(' '));
                } else if (command === 'about') {
                    return aboutInfo();
                }
                
                // If no command matched, provide a default response
                const defaultResponses = [
                    "I'm not sure what you mean. Type 'help' to see what I can do.",
                    `Sorry, I don't understand '${userInput}'. Try asking for 'help'.`,
                    "Interesting... but I'm not programmed to respond to that. Need 'help'?",
                    "Could you rephrase that? Type 'help' for available commands."
                ];
                return defaultResponses[Math.floor(Math.random() * defaultResponses.length)];
            }
            
            function respondToGreeting() {
                const greetings = [
                    `Hello ${userName}! How can I help you today?`,
                    `Hi there ${userName}! What's on your mind?`,
                    `Hey ${userName}! Nice to see you again!`,
                    `Greetings ${userName}! How can I assist you?`
                ];
                return greetings[Math.floor(Math.random() * greetings.length)];
            }
            
            function tellTime() {
                const now = new Date();
                return `The current time is ${now.toLocaleTimeString()}`;
            }
            
            function tellDate() {
                const now = new Date();
                return `Today's date is ${now.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' })}`;
            }
            
            function tellJoke() {
                const jokes = [
                    "Why don't scientists trust atoms? Because they make up everything!",
                    "Why did the scarecrow win an award? Because he was outstanding in his field!",
                    "I told my wife she was drawing her eyebrows too high. She looked surprised.",
                    "What do you call a fake noodle? An impasta!",
                    "How do you organize a space party? You planet!"
                ];
                return jokes[Math.floor(Math.random() * jokes.length)];
            }
            
            function showHelp() {
                helpModal.style.display = 'flex';
                return "I've opened the help menu for you!";
            }
            
            function rememberInfo(key, value) {
                memory.facts[key.toLowerCase()] = value;
                saveMemory();
                return `I've remembered '${key}' for you.`;
            }
            
            function recallInfo(key) {
                key = key.toLowerCase();
                if (key in memory.facts) {
                    return `You told me that '${key}' is: ${memory.facts[key]}`;
                } else {
                    return `I don't remember anything about '${key}'.`;
                }
            }
            
            function clearMemory() {
                memory.facts = {};
                saveMemory();
                return "I've cleared all my memories.";
            }
            
            function quitChat() {
                return "Goodbye! Have a great day!";
            }
            
            function weatherInfo(location = "") {
                if (!location) {
                    location = "your area";
                }
                
                const weatherTypes = ["sunny", "rainy", "cloudy", "windy", "snowy"];
                const temps = Math.floor(Math.random() * 41) - 5; // -5 to 35
                return `The weather in ${location} is ${weatherTypes[Math.floor(Math.random() * weatherTypes.length)]} with a temperature of ${temps}°C.`;
            }
            
            function calculate(expression) {
                try {
                    // Security note: In a real application, you'd want to sanitize the input
                    // This is a simple example - don't use eval() in production without proper sanitization
                    const result = eval(expression.replace(/[^-()\d/*+.]/g, ''));
                    return `The result of ${expression} is ${result}`;
                } catch {
                    return "Sorry, I couldn't calculate that. Please check your expression.";
                }
            }
            
            function aboutInfo() {
                return `
                About ChatBot:
                --------------------------
                Version: 1.2
                Features: Simple chatbot with enhanced command system
                Memory: Can remember facts between sessions
                Sessions: ${memory.sessions} chats so far
                --------------------------
                `;
            }
            
            function saveMemory() {
                localStorage.setItem('chatbotMemory', JSON.stringify(memory));
            }
            
            // Ask for user's name if it's the first message
            if (memory.sessions === 1) {
                addBotMessage("Hello! What's your name?");
                const originalProcessCommand = processCommand;
                processCommand = function(userInput) {
                    userName = userInput.trim() || "User";
                    addBotMessage(`Nice to meet you, ${userName}! How can I help you today?`);
                    processCommand = originalProcessCommand;
                    return "";
                };
            }
        });
    </script>
</body>
</html>
